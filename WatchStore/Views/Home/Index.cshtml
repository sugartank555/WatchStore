@model WatchStore.Models.ViewModels.HomeVm
@{
    ViewData["Title"] = "Trang chủ";
    Layout = "~/Views/Shared/_Layout.cshtml";
    string PriceVN(decimal p) => string.Format(new System.Globalization.CultureInfo("vi-VN"), "{0:N0} ₫", p);
}

<style>
    :root {
        --bg-1: #0b1020;
        --bg-2: #111827;
        --ink: #0f172a;
        --muted: #6b7280;
        --ring: #60a5fa;
        --card: #ffffff;
        --chip: #f3f4f6;
    }

    

    {
        --card: #0f172a;
        --chip: #111827;
        --ink: #e5e7eb;
        --muted: #9ca3af
    }

    .border-soft {
        border-color: #1f2937 !important
    }

    }

    .container-wide {
        max-width: 1200px
    }

    /* ===== HERO ===== */
    .hero {
        border-radius: 20px;
        background: radial-gradient(1200px 400px at 10% -10%, rgba(59,130,246,.35), transparent), radial-gradient(800px 300px at 90% 120%, rgba(147,51,234,.35), transparent), linear-gradient(135deg, var(--bg-1), var(--bg-2));
        color: #e5e7eb;
        padding: clamp(28px,5vw,56px);
        position: relative;
        overflow: hidden;
        isolation: isolate;
    }

        .hero .glow {
            position: absolute;
            inset: auto -25% -45% -25%;
            height: 340px;
            filter: blur(40px);
            opacity: .9;
            pointer-events: none
        }

        .hero h1 {
            font-weight: 800;
            letter-spacing: .3px
        }

        .hero .lead {
            color: #cbd5e1
        }

    .hero-cta .btn {
        padding: .8rem 1.2rem;
        border-radius: 14px
    }

    /* ===== UTIL ===== */
    .section-title {
        font-weight: 800;
        letter-spacing: .2px
    }

    .text-muted-2 {
        color: var(--muted) !important
    }

    .border-soft {
        border: 1px solid #e5e7eb
    }

    /* ===== BENEFITS ===== */
    .benefit {
        background: #0f172a;
        color: #cbd5e1;
        border-radius: 12px;
        padding: 12px 14px
    }
    

    {
        background: #0b1020;
        color: #e5e7eb
    }

    }

    /* ===== BRAND CHIPS ===== */
    .brand-chip {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 14px;
        border: 1px solid #e5e7eb;
        border-radius: 999px;
        background: #fff;
        font-weight: 600;
        color: #111827;
        margin: 6px 8px 0 0;
        transition: all .2s
    }

        .brand-chip:hover {
            background: #111827;
            color: #fff;
            text-decoration: none;
            transform: translateY(-2px)
        }

    /* ===== PRODUCT CARD ===== */
    .product-card {
        border: none;
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0,0,0,.08);
        transition: transform .25s, box-shadow .25s;
        overflow: hidden;
        height: 100%;
        background: var(--card)
    }

        .product-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 14px 40px rgba(0,0,0,.16)
        }

    .product-media {
        position: relative
    }

        .product-media .ratio {
            --bs-aspect-ratio: 66%
        }

    .product-card img {
        object-fit: cover;
        transition: transform .6s
    }

    .product-card:hover img {
        transform: scale(1.07)
    }

    .product-actions {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        opacity: 0;
        transform: translateY(-6px);
        transition: .25s
    }

    .product-card:hover .product-actions {
        opacity: 1;
        transform: none
    }

    .product-actions .btn {
        border-radius: 50px;
        padding: .5rem .7rem
    }

    .ribbon {
        position: absolute;
        top: 12px;
        left: 12px;
        background: #111827;
        color: #fff;
        border-radius: 999px;
        padding: .3rem .65rem;
        font-weight: 700;
        font-size: .8rem
    }

    .card-body h6 {
        min-height: 2.5rem
    }

    .price {
        color: #dc2626;
        font-weight: 800
    }

    .old-price {
        color: var(--muted);
        text-decoration: line-through
    }

    .rating {
        color: #f59e0b;
        font-size: .95rem
    }

    /* ===== NEWSLETTER & CTA ===== */
    .surface {
        background: linear-gradient(180deg, #fafafa, #f3f4f6);
        border-radius: 18px
    }
    

    {
        background: #0f172a
    }

    }

    /* ===== ACCESSIBILITY ===== */
    .sr-only-focusable:focus {
        clip: auto;
        width: auto;
        height: auto;
        padding: .5rem
    }

    /* ===== REDUCED MOTION ===== */
    

    {
        animation: none !important;
        transition: none !important
    }

    }
</style>

<div class="container container-wide py-4">

    <!-- HERO -->
    <section class="hero mb-4">
        <div class="row align-items-center gx-4">
            <div class="col-lg-7 position-relative" style="z-index:1">
                <span class="badge bg-primary-subtle text-primary mb-2">Sưu tầm mới • 2025</span>
                <h1 class="display-5 mb-2">Sugar Watch</h1>
                <p class="lead mb-3">Đẳng cấp từ từng nhịp thời gian. Sản phẩm chính hãng, bảo hành toàn quốc.</p>

                <!-- Quick search -->
                <form method="get" asp-area="" asp-controller="Products" asp-action="Index" class="row g-2" role="search" aria-label="Tìm nhanh">
                    <div class="col-sm-7">
                        <label class="visually-hidden" for="q">Tìm kiếm</label>
                        <input id="q" class="form-control form-control-lg" name="q" value="@Model.Q" placeholder="Tìm theo tên / mô tả…" />
                    </div>
                    <div class="col-sm-3">
                        <label class="visually-hidden" for="brand">Thương hiệu</label>
                        <select id="brand" class="form-select form-select-lg" name="brand">
                            <option value="">Thương hiệu</option>
                            @foreach (var b in Model.Brands)
                            {
                                <option value="@b" selected="@(Model.Brand == b)">@b</option>
                            }
                        </select>
                    </div>
                    <div class="col-sm-2 d-grid">
                        <button class="btn btn-primary btn-lg" aria-label="Tìm kiếm">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                </form>

                <div class="d-flex flex-wrap gap-2 mt-3">
                    <div class="benefit"><i class="bi bi-shield-check"></i> Chính hãng 100%</div>
                    <div class="benefit"><i class="bi bi-truck"></i> Giao nhanh</div>
                    <div class="benefit"><i class="bi bi-arrow-repeat"></i> Đổi trả 7 ngày</div>
                </div>

                <div class="hero-cta mt-3 d-flex gap-2">
                    <a class="btn btn-light btn-lg" asp-controller="Products" asp-action="Index">
                        <i class="bi bi-compass"></i> Khám phá ngay
                    </a>
                    <a class="btn btn-outline-light btn-lg" asp-controller="Products" asp-action="Index" asp-route-sort="price-desc">
                        <i class="bi bi-star"></i> Hàng cao cấp
                    </a>
                </div>
            </div>
            <div class="col-lg-5 d-none d-lg-block text-end position-relative" style="z-index:1">
                <picture>
                    <img src="~/images/a2dc92e8c3cd4f528869e749457f6895.jpg" alt="Đồng hồ nổi bật" class="img-fluid rounded-4 border border-1 border-secondary" loading="eager" onerror="this.src='/images/hero-watch.jpg'" />
                </picture>
            </div>
        </div>
        <div class="glow"></div>
    </section>

    <!-- TOP BRANDS -->
    <section class="mb-4">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h3 class="section-title mb-0">Thương hiệu nổi bật</h3>
            <a class="btn btn-sm btn-outline-dark" asp-area="" asp-controller="Products" asp-action="Index">Xem tất cả</a>
        </div>
        <div class="d-flex flex-wrap">
            @foreach (var b in Model.Brands.Take(12))
            {
                <a class="brand-chip" asp-area="" asp-controller="Products" asp-action="Index" asp-route-brand="@b">
                    <i class="bi bi-bookmark-star"></i> @b
                </a>
            }
        </div>
    </section>

    <!-- NEW ARRIVALS -->
    <section class="mb-4">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h3 class="section-title mb-0">Sản phẩm mới</h3>
            <a class="btn btn-sm btn-outline-dark" asp-area="" asp-controller="Products" asp-action="Index">Xem tất cả</a>
        </div>
        <div class="row g-3">
            @foreach (var p in Model.NewArrivals)
            {
                var img = string.IsNullOrWhiteSpace(p.ImageUrl) ? "/images/placeholder.png" : p.ImageUrl;
                <div class="col-6 col-md-4 col-xl-3">
                    <div class="card product-card h-100">
                        <div class="product-media">
                            <div class="ratio">
                                <img src="@img" alt="@p.Name" class="w-100 h-100" loading="lazy" />
                            </div>
                            <div class="product-actions">
                                <button class="btn btn-light btn-sm" type="button" title="Yêu thích" aria-label="Thêm vào yêu thích">
                                    <i class="bi bi-heart"></i>
                                </button>
                                <a asp-controller="Products" asp-action="Details" asp-route-id="@p.Id" class="btn btn-dark btn-sm" title="Xem nhanh">
                                    <i class="bi bi-eye"></i>
                                </a>
                            </div>
                        </div>
                        <div class="card-body text-center">
                            <div class="small text-muted">@p.Brand</div>
                            <h6 class="fw-bold mb-1">@p.Name</h6>
                            <div class="d-flex justify-content-center align-items-baseline gap-2">
                                <div class="price">@PriceVN(p.Price)</div>
                            </div>
                            <div class="rating mt-1" aria-label="Đánh giá 5 sao giả lập">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star"></i>
                            </div>
                        </div>
                        <div class="p-3 pt-0 d-flex justify-content-center gap-2">
                            <a asp-controller="Products" asp-action="Details" asp-route-id="@p.Id" class="btn btn-outline-dark btn-sm">Chi tiết</a>
                            <form asp-controller="Cart" asp-action="Add" method="post" class="d-inline">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="productId" value="@p.Id" />
                                <button class="btn btn-primary btn-sm">
                                    <i class="bi bi-bag-plus"></i> Thêm giỏ
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            }
        </div>
    </section>

    <!-- BEST SELLERS -->
    <section class="mb-4">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h3 class="section-title mb-0">Bán chạy</h3>
            <a class="btn btn-sm btn-outline-dark" asp-area="" asp-controller="Products" asp-action="Index" asp-route-sort="sold-desc">Xem bảng xếp hạng</a>
        </div>
        <div class="row g-3">
            @foreach (var p in Model.BestSellers)
            {
                var img = string.IsNullOrWhiteSpace(p.ImageUrl) ? "/images/placeholder.png" : p.ImageUrl;
                <div class="col-6 col-md-4 col-xl-3">
                    <div class="card product-card h-100">
                        <div class="product-media">
                            <div class="ratio">
                                <img src="@img" alt="@p.Name" class="w-100 h-100" loading="lazy" />
                            </div>
                            <div class="product-actions">
                                <button class="btn btn-light btn-sm" type="button" title="Yêu thích" aria-label="Thêm vào yêu thích">
                                    <i class="bi bi-heart"></i>
                                </button>
                                <a asp-controller="Products" asp-action="Details" asp-route-id="@p.Id" class="btn btn-dark btn-sm" title="Xem nhanh">
                                    <i class="bi bi-eye"></i>
                                </a>
                            </div>
                            <span class="ribbon"><i class="bi bi-lightning-charge-fill"></i> Hot</span>
                        </div>
                        <div class="card-body text-center">
                            <div class="small text-muted">@p.Brand</div>
                            <h6 class="fw-bold mb-1">@p.Name</h6>
                            <div class="d-flex justify-content-center align-items-baseline gap-2">
                                <div class="price">@PriceVN(p.Price)</div>
                            </div>
                            <div class="rating mt-1">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-half"></i>
                            </div>
                        </div>
                        <div class="p-3 pt-0 d-flex justify-content-center gap-2">
                            <a asp-controller="Products" asp-action="Details" asp-route-id="@p.Id" class="btn btn-outline-dark btn-sm">Chi tiết</a>
                            <form asp-controller="Cart" asp-action="Add" method="post" class="d-inline">
                                @Html.AntiForgeryToken()
                                <input type="hidden" name="productId" value="@p.Id" />
                                <button class="btn btn-primary btn-sm">
                                    <i class="bi bi-bag-plus"></i> Thêm giỏ
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            }
        </div>
    </section>

    <!-- TESTIMONIALS + NEWSLETTER -->
    <section class="row g-3 align-items-stretch mb-4">
        <div class="col-lg-6">
            <div class="h-100 p-4 rounded-4 border-soft surface">
                <h5 class="mb-3"><i class="bi bi-chat-quote"></i> Khách hàng nói gì?</h5>
                <figure class="mb-0">
                    <blockquote class="blockquote mb-3">
                        <p class="mb-0">“Đồng hồ đẹp, đóng gói kỹ, giao nhanh. Sẽ ủng hộ tiếp!”</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">Anh Minh — Hà Nội</figcaption>
                </figure>
                <hr />
                <figure class="mb-0">
                    <blockquote class="blockquote mb-3">
                        <p class="mb-0">“Tư vấn nhiệt tình, giá hợp lý, bảo hành rõ ràng.”</p>
                    </blockquote>
                    <figcaption class="blockquote-footer">Chị Lan — TP.HCM</figcaption>
                </figure>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="h-100 p-4 rounded-4 border-soft">
                <h5 class="mb-2"><i class="bi bi-envelope-paper"></i> Đăng ký nhận tin</h5>
                <p class="text-muted-2">Nhận ưu đãi & tin tức sản phẩm mới mỗi tuần.</p>
                <form method="post" action="#" novalidate>
                    <div class="input-group input-group-lg">
                        <label class="visually-hidden" for="newsletterEmail">Email</label>
                        <input id="newsletterEmail" class="form-control" type="email" placeholder="Nhập email của bạn" required />
                        <button class="btn btn-dark">Đăng ký</button>
                    </div>
                    <div class="form-text">Chúng tôi tôn trọng quyền riêng tư của bạn.</div>
                </form>
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="mb-4">
        <div class="p-4 p-md-5 rounded-4 text-center border-soft">
            <h4 class="mb-2">Sẵn sàng tìm chiếc đồng hồ tiếp theo?</h4>
            <p class="text-muted-2 mb-3">Khám phá bộ sưu tập hơn 500 mẫu từ các thương hiệu hàng đầu.</p>
            <a class="btn btn-primary btn-lg" asp-controller="Products" asp-action="Index">Bắt đầu mua sắm</a>
        </div>
    </section>

</div>
